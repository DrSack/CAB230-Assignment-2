{ "openapi":"3.0.0",
    "info":{
    "title":"Stocks API",
    "description":"This is a simple Express API that displays data and stuff from the server",
    "version":"1.0.0"
    },
    "servers":[ 
        {
            "url": "http://localhost:3001"
        }
    ],
    "basePath":"/api",
        "tags":[
        {
            "name":"Queries",
            "description":"General API description"
        },
        {
            "name":"Users",
            "description":"API queries based on city and optional country code."
        }
 ],
    "paths":{ 
        "/stocks/symbols":{
                "get":{
                    "tags":["Queries"],
                    "summary":"Returns all available stocks, optionally filtered by industry sector.",
                    "operationId":"get_stocks_symbols",
                    "parameters": [
                        {
                            "in": "query",
                            "name": "industry",
                            "description": "Industry sector (may use prefix) e.g. Information Technology",
                            "required": false,
                            "schema": {
                              "type": "string",
                                "industry": {
                                  "type": "string"
                                }
                              }
                          }
                      ],
                    "responses":
                    {
                        "200":
                            {
                                "description": "A JSON array of stock listing objects comprising name, symbol and industry sector",
                                "content": 
                                {
                                    "application/json": {
                                        "schema": {
                                            "type": "array",
                                            "items":{
                                                "type": "object",
                                                "properties":{
                                                    "name":{
                                                        "type": "string",
                                                        "example": "Agilent Technologies Inc"
                                                    },
                                                    "symbol":{
                                                        "type": "string", 
                                                        "example": "A"
                                                    },
                                                    "industry":{
                                                        "type": "string", 
                                                        "example": "Health Care"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        ,
                    "400":
                        {
                            "description": "Invalid query parameter",
                                "content": 
                                {
                                    "application/json": {
                                        "schema": {
                                                "type": "object",
                                                "properties":{
                                                    "error":{
                                                        "type": "bool",
                                                        "example": true
                                                    },
                                                    "message":{
                                                        "type": "string", 
                                                        "example": "Invalid query parameter: only 'industry' is permitted"
                                                    }
                                                }
                                        }
                                    }
                                }
                        }
                        ,
                    "404":
                        {
                            "description": "Industry sector not found",
                                "content": 
                                {
                                    "application/json": {
                                        "schema": {
                                                "type": "object",
                                                "properties":{
                                                    "error":{
                                                        "type": "bool",
                                                        "example": true
                                                    },
                                                    "message":{
                                                        "type": "string", 
                                                        "example": "Industry sector not found"
                                                    }
                                                }
                                        }
                                    }
                                }
                        }
                }
            }},

        "/stocks/{symbol}":{ 
            "get":{
                "tags":["Queries"],
                "summary":"Returns the latest entry for a particular stock searched by symbol (1-5 upper case letters).",
                "operationId":"get_stocks__symbol_",
                "produces":["application/json"],
                "parameters": [
                    {
                        "in": "path",
                        "name": "symbol",
                        "description": "The exchange symbol of the stock",
                        "required": true,
                        "schema": {
                          "type": "string",
                            "item": {
                              "type": "string"
                            }
                          },
                          "example": "AAL"
                      }
                  ],
                "responses":
                    {
                        "200":
                            {
                                "description": "A stock object",
                                "content": 
                                {
                                    "application/json": {
                                        "schema": {
                                                "type": "object",
                                                "properties":{
                                                    "timestamp":{
                                                        "type": "string", 
                                                        "example": "2020-03-22T14:00:00.000Z"
                                                    },
                                                    "symbol":{
                                                        "type": "string", 
                                                        "example": "AAL"
                                                    },
                                                    "name":{
                                                        "type": "string", 
                                                        "example": "American Airlines Group"
                                                    },
                                                    "industry":{
                                                        "type": "string", 
                                                        "example": "Industrials"
                                                    },
                                                    "open":{
                                                        "type": "number", 
                                                        "example": 10.9
                                                    },
                                                    "high":{
                                                        "type": "number", 
                                                        "example": 11.36
                                                    },
                                                    "low":{
                                                        "type": "number", 
                                                        "example": 10.01
                                                    },
                                                    "close":{
                                                        "type": "number", 
                                                        "example": 10.25
                                                    },
                                                    "volumes":{
                                                        "type": "number", 
                                                        "example": 55491000
                                                    }
                                                }
                                        }
                                    }
                                }
                            }
                        ,
                    "400":
                        {
                            "description": "Invalid query parameter(s)",
                                "content": 
                                {
                                    "application/json": {
                                        "schema": {
                                                "type": "object",
                                                "properties":{
                                                    "error":{
                                                        "type": "bool",
                                                        "example": true
                                                    },
                                                    "message":{
                                                        "type": "string", 
                                                        "example": "Date parameters only available on authenticated route /stocks/authed"
                                                    }
                                                }
                                        }
                                    }
                                }
                        }
                        ,
                    "404":
                        {
                            "description": "No entry for the symbol found in the stocks database.",
                                "content": 
                                {
                                    "application/json": {
                                        "schema": {
                                                "type": "object",
                                                "properties":{
                                                    "error":{
                                                        "type": "bool",
                                                        "example": true
                                                    },
                                                    "message":{
                                                        "type": "string", 
                                                        "example": "No entry for symbol in stocks database"
                                                    }
                                                }
                                        }
                                    }
                                }
                        }
                }
            }},
            "/stocks/authed/{symbol}": { 
                "get":{
                    "tags":["Queries"],
                    "summary":"List of cities and provinces based on country code",
                    "description":"A full listing of cities and their provinces for the database",
                    "operationId":"get_stocks_authed__symbol_",
                    "produces":["application/json"],
                    "parameters": [
                        {
                          "in": "path",
                          "name": "CountryCode",
                          "description": "Pass Country Code Here",
                          "required": true,
                          "schema": {
                            "type": "string",
                              "Country": {
                                "type": "string"
                              }
                            }
                        },
                        {
                            "in": "query",
                            "name": "District",
                            "description": "Pass District Here",
                            "required": false,
                            "schema": {
                              "type": "string",
                                "Dis": {
                                  "type": "string"
                                }
                              }
                          }
                      ],
                      
                    "responses":
                    {
                        "200":
                            {
                                "description":"successful operation",
                                "schema":{
                                    "type": "object",
                                    "properties":{
                                        "Error":{
                                            "type": "string",
                                            "enum": ["true","false"]
                                        },
                                        "Message":{
                                          "type":"string",
                                          "enum":["Success","Failure"]  
                                        },
                                        "City":{
                                            "tpye":"array",
                                            "items":{
                                                "type":"object",
                                                "properties":{
                                                    "name":{
                                                        "type":"string"
                                                    },
                                                    "district":{
                                                        "type":"string"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                    }
                }},
                "/user/register": { 
                "post":{
                    "tags":["Users"],
                    "summary":"List of cities and provinces",
                    "description":"A full listing of cities and their provinces for the database",
                    "operationId":"listCitiesAndDistricts",
                    "produces":["application/json"],
                    "responses":
                    {
                        "200":
                            {
                                "description":"successful operation",
                                "schema":{
                                    "type": "object",
                                    "properties":{
                                        "Error":{
                                            "type": "string",
                                            "enum": ["true","false"]
                                        },
                                        "Message":{
                                          "type":"string",
                                          "enum":["Success","Failure"]  
                                        },
                                        "City":{
                                            "tpye":"array",
                                            "items":{
                                                "type":"object",
                                                "properties":{
                                                    "name":{
                                                        "type":"string"
                                                    },
                                                    "district":{
                                                        "type":"string"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                    }
                }
            },
            "/user/login": { 
                "post":{
                    "tags":["Users"],
                    "summary":"List of cities and provinces",
                    "description":"A full listing of cities and their provinces for the database",
                    "operationId":"listCitiesAndDistricts",
                    "produces":["application/json"],
                    "responses":
                    {
                        "200":
                            {
                                "description":"successful operation",
                                "schema":{
                                    "type": "object",
                                    "properties":{
                                        "Error":{
                                            "type": "string",
                                            "enum": ["true","false"]
                                        },
                                        "Message":{
                                          "type":"string",
                                          "enum":["Success","Failure"]  
                                        },
                                        "City":{
                                            "tpye":"array",
                                            "items":{
                                                "type":"object",
                                                "properties":{
                                                    "name":{
                                                        "type":"string"
                                                    },
                                                    "district":{
                                                        "type":"string"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                    }
                }
            }

        }
    
}
                